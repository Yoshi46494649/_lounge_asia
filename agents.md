## MCP Usage Policy

- すべてのコード生成は **Semgrep→TSビルド→Unit→Playwright** が green の場合のみ PR 作成。
- 外部副作用のある MCP（GitHub/Supabase/Stripe/n8n/Retell）は **dry-run → plan → apply** の3段階。
- シークレットは Memory に保存しない。`.env` / CI の OIDC を使用。
- 本番データ書き換えは **手動承認ゲート** 必須（Context7 に記録）。
- 失敗時は実行計画を Context7 に残し、ロールバック手順を自動提示。

# Lounge Asia 繝励Ο繧ｸ繧ｧ繧ｯ繝域欠遉ｺ譖ｸ

## 1. 繝励Ο繧ｸ繧ｧ繧ｯ繝域ｦりｦ・(Project Overview)
- Lounge Asia・医が繝ｼ繧ｹ繝医Λ繝ｪ繧｢蝨ｨ菴上・繧｢繧ｸ繧｢邉ｻ繧ｳ繝溘Η繝九ユ繧｣・峨・繧ｪ繝ｳ繝ｩ繧､繝ｳ繝励Ξ繧ｼ繝ｳ繧ｹ繧堤ｵｱ蜷育ｮ｡逅・☆繧九Μ繝昴ず繝医Μ縲ゅΓ繧､繝ｳ繧ｵ繧､繝医ヾpeed Dating 繧､繝吶Φ繝医：ortune 險ｺ譁ｭ繧ｳ繝ｳ繝・Φ繝・ｒ蜷ｫ繧隍・焚縺ｮ繝ｩ繝ｳ繝・ぅ繝ｳ繧ｰ縺悟酔螻・☆繧九・- 繝ｫ繝ｼ繝育峩荳九・ `index.html` 縺ｯ Tailwind CSS 繧堤畑縺・◆髱咏噪繝ｩ繝ｳ繝・ぅ繝ｳ繧ｰ繝壹・繧ｸ縲４peed Dating 繧・推遞ｮ SNS 縺ｸ縺ｮ蟆守ｷ壹ｒ謠蝉ｾ帙＠縲∵律譛ｬ隱槭・闍ｱ隱樊ｷｷ蝨ｨ縺ｮ繝槭・繧ｱ繝・ぅ繝ｳ繧ｰ繧ｳ繝斐・繧剃ｿ晄戟縺吶ｋ縲・- `speed-dating/` 縺ｨ `fortune/` 驟堺ｸ九・繝薙Ν繝画ｸ医∩縺ｮ髱咏噪驟堺ｿ｡迚ｩ縲ゅた繝ｼ繧ｹ縺ｨ縺ｪ繧・React + TypeScript 繝励Ο繧ｸ繧ｧ繧ｯ繝医・縺昴ｌ縺槭ｌ `au-luxe-landing/`・・peed Dating LP・峨→ `fortune-funnel/` 縺ｫ驟咲ｽｮ縺輔ｌ繧九・- `brisbane-asian-blogging/` 縺ｯ繝悶Ο繧ｰ荳ｻ菴薙・豢ｾ逕溘Λ繝ｳ繝・ぅ繝ｳ繧ｰ縲ゅ＞縺壹ｌ繧・shadcn-ui + Tailwind 繧呈治逕ｨ縺励∝酔縺倩ｨｭ險郁ｨ隱槭〒繧ｳ繝ｳ繝・Φ繝・ｒ螻暮幕縺吶ｋ縲・- `fortune-funnel/supabase/functions/fortune-diagnosis/index.ts` 縺ｧ縺ｯ Lovable AI Gateway 繧堤畑縺・◆蜊縺・函謌・API・・upabase Edge Function on Deno・峨ｒ謠蝉ｾ帙ゅヵ繝ｭ繝ｳ繝亥・縺九ｉ Supabase 邨檎罰縺ｧ險ｺ譁ｭ邨先棡繧貞叙蠕励☆繧区ｧ区・縲・
## 2. 繧ｳ繝ｼ繝・ぅ繝ｳ繧ｰ隕冗ｴ・・繧ｹ繧ｿ繧､繝ｫ (Coding Conventions)
- **蜻ｽ蜷崎ｦ丞援**・啌eact 繧ｳ繝ｳ繝昴・繝阪Φ繝医・繝輔ぃ繧､繝ｫ縺ｯ `PascalCase`縲√ヵ繝・け繧・Θ繝ｼ繝・ぅ繝ｪ繝・ぅ縺ｯ `camelCase`縲５ailwind 逕ｨ縺ｮ CSS 繧ｯ繝ｩ繧ｹ縺ｯ繧ｱ繝舌ヶ繧ｱ繝ｼ繧ｹ縲ょｮ壽焚縺ｯ `UPPER_SNAKE_CASE` 繧帝∩縺代～camelCase`/`PascalCase` 縺ｧ陦ｨ迴ｾ縺励※縺・ｋ邂・園縺悟､壹＞縲・- **繧､繝ｳ繝・Φ繝・*・啜ypeScript/TSX/JSX 縺ｯ 2 繧ｹ繝壹・繧ｹ縲・TML 縺ｯ 2縲・ 繧ｹ繝壹・繧ｹ縺縺後ン繝ｫ繝画ｸ医∩繝輔ぃ繧､繝ｫ縺ｯ謨ｴ蠖｢貂医∩縺ｮ縺溘ａ縲∫ｷｨ髮・凾縺ｯ 2 繧ｹ繝壹・繧ｹ繧貞渕貅悶↓縺吶ｋ縲・- **讒区・譁ｹ驥・*・・  - React 繝励Ο繧ｸ繧ｧ繧ｯ繝医・ `src/components`, `src/pages`, `src/hooks`, `src/lib` 縺ｮ讒区・縲Ｔhadcn UI 繧ｳ繝ｳ繝昴・繝阪Φ繝医・ `src/components/ui` 縺ｫ髮・ｴ・＆繧後※縺翫ｊ縲√Λ繝・ヴ繝ｳ繧ｰ繧・僑蠑ｵ縺ｯ譌｢蟄倥ヱ繧ｿ繝ｼ繝ｳ縺ｫ蛟｣縺・・  - `@/*` 繧ｨ繧､繝ｪ繧｢繧ｹ・・tsconfig.json`・峨〒 `src` 驟堺ｸ九ｒ蜿ら・縲よ眠隕上ヵ繧｡繧､繝ｫ繧ゅ％縺ｮ繧ｨ繧､繝ｪ繧｢繧ｹ繧呈ｴｻ逕ｨ縺吶ｋ縲・  - 繝薙Ν繝画・譫懃黄・・speed-dating/assets/*.js` 繧・`fortune/assets/*.js` 縺ｪ縺ｩ・峨・逶ｴ謗･邱ｨ髮・○縺壹∝ｿ・★ TypeScript 繧ｽ繝ｼ繧ｹ繧呈峩譁ｰ縺励※繝薙Ν繝峨〒蜀咲函謌舌☆繧九・- **繧ｹ繧ｿ繧､繝ｪ繝ｳ繧ｰ**・啜ailwind CSS + 繧ｫ繧ｹ繧ｿ繝 CSS 螟画焚繧剃ｽｿ逕ｨ縲Ａtailwind.config.ts` 縺ｧ縺ｯ `Inter` / `Noto Sans JP` 繧貞燕謠舌↓繝・・繝槭ｒ諡｡蠑ｵ縲よ眠隕上け繝ｩ繧ｹ縺ｯ譌｢蟄倥・繝・じ繧､繝ｳ繝医・繧ｯ繝ｳ・・var(--primary)` 縺ｪ縺ｩ・峨ｒ蜀榊茜逕ｨ縺吶ｋ縲・- **繧ｳ繝｡繝ｳ繝・*・壹Ο繧ｸ繝・け縺ｮ諢丞峙縺瑚ｪｭ縺ｿ蜿悶ｊ縺･繧峨＞邂・園縺ｮ縺ｿ遏ｭ縺・さ繝｡繝ｳ繝医ｒ霑ｽ蜉縲６I 繝ｬ繧､繧｢繧ｦ繝医ｄ蜊倡ｴ斐↑ JSX 縺ｫ縺ｯ荳崎ｦ√４upabase Edge Function 縺ｪ縺ｩ萓句､也噪縺ｫ隍・尅縺ｪ邂・園縺ｧ縺ｯ繧ｬ繝ｼ繝臥ｯ縺ｮ諢丞峙繧偵さ繝｡繝ｳ繝医〒陬懆ｶｳ縺励※縺・ｋ縲・- **繧ｨ繝ｩ繝ｼ繝上Φ繝峨Μ繝ｳ繧ｰ**・啌eact 繝輔Ο繝ｳ繝医〒縺ｯ `toast` 騾夂衍繧堤畑諢上＠縲∝､ｱ謨玲凾縺ｫ繝ｦ繝ｼ繧ｶ繝ｼ縺ｸ繝輔ぅ繝ｼ繝峨ヰ繝・け縺吶ｋ縲４upabase Edge Function 縺ｯ `try/catch` 縺ｨ HTTP 繧ｹ繝・・繧ｿ繧ｹ邂｡逅・〒螟ｱ謨礼炊逕ｱ繧定ｿ泌唆縲よ眠隕上さ繝ｼ繝峨ｂ蜷梧ｰｴ貅悶・繧ｨ繝ｩ繝ｼ蜃ｦ逅・ｒ螳溯｣・☆繧九・
## 3. 繝・せ繝域婿驥昴・螳溯｡梧婿豕・(Testing Guidelines)
- 繝ｫ繝ｼ繝磯撕逧・し繧､繝茨ｼ・  - `npm run build:css`・・ailwind CLI・峨〒 `styles/main.css` 縺九ｉ `assets/main.min.css` 繧堤函謌舌・  - `npm run build:js`・・erser・峨〒 `assets/main.js` 繧堤ｸｮ蟆丞喧縲・  - `npm run check:site` 縺ｧ E2E 邁｡譏鍋｢ｺ隱阪１ython `http.server` 繧定ｵｷ蜍補・Playwright 縺ｧ繝壹・繧ｸ隱ｭ縺ｿ霎ｼ縺ｿ竊偵さ繝ｳ繧ｽ繝ｼ繝ｫ繧ｨ繝ｩ繝ｼ讀懷・・・せ繧ｯ繝ｪ繝ｼ繝ｳ繧ｷ繝ｧ繝・ヨ菫晏ｭ倥ょ・蝗槭・ `npx playwright install` 縺ｧ繝悶Λ繧ｦ繧ｶ繧堤畑諢上☆繧九・- React/Vite 繝励Ο繧ｸ繧ｧ繧ｯ繝茨ｼ・au-luxe-landing/`, `brisbane-asian-blogging/`, `fortune-funnel/`・会ｼ・  - `npm install` 蠕後～npm run dev` 縺ｧ髢狗匱繧ｵ繝ｼ繝撰ｼ・ite・峨・  - `npm run build` 縺ｧ譛ｬ逡ｪ繝薙Ν繝峨Ａau-luxe-landing` 縺ｯ繝薙Ν繝牙ｾ後↓ `postbuild` 繧ｹ繧ｯ繝ｪ繝励ヨ縺後ヶ繝ｭ繧ｰ逕ｨ縺ｮ髱咏噪繧ｨ繝ｳ繝医Μ繧・`dist/blog/**` 縺ｫ隍・｣ｽ縺吶ｋ縺溘ａ縲√お繝ｩ繝ｼ縺後↑縺・°遒ｺ隱阪☆繧九・  - `npm run lint` 縺ｧ ESLint・・ypescript-eslint + react-hooks + react-refresh・峨・int 繧ｨ繝ｩ繝ｼ縺ｯ繧ｳ繝ｼ繝臥函謌仙燕縺ｫ隗｣豸医＠縺ｦ縺九ｉ繧ｳ繝溘ャ繝医・- Supabase Edge Function・・  - 繝ｭ繝ｼ繧ｫ繝ｫ讀懆ｨｼ縺ｯ `supabase functions serve fortune-diagnosis`・・upabase CLI 蠢・茨ｼ峨〒 HTTP 繧ｨ繝ｳ繝峨・繧､繝ｳ繝医ｒ襍ｷ蜍輔＠縲～curl` 繧・い繝励Μ縺九ｉ JSON 繧帝∽ｿ｡縺励※繝ｬ繧ｹ繝昴Φ繧ｹ繧堤｢ｺ隱阪・  - `.env` 縺ｫ縺ｯ `LOVABLE_API_KEY` 縺ｪ縺ｩ遘伜ｯ・ュ蝣ｱ繧剃ｿ晏ｭ倥ゅユ繧ｹ繝域凾縺ｯ繝繝溘・繧ｭ繝ｼ繧貞茜逕ｨ縺励；it 縺ｫ縺ｯ繧ｳ繝溘ャ繝医＠縺ｪ縺・・- 螟画峩繧貞刈縺医◆驛ｨ蛻・↓蠢懊§縺ｦ荳願ｨ倥ユ繧ｹ繝医ｒ邨・∩蜷医ｏ縺帙∝ｰ代↑縺上→繧ゅン繝ｫ繝峨→隧ｲ蠖・Lint/E2E 繧呈・蜉溘＆縺帙※縺九ｉ謠仙・縺吶ｋ縲・
## 4. 謚陦薙せ繧ｿ繝・け (Tech Stack)
- **蜈ｱ騾・*・哢ode.js + npm・・package-lock.json` 邂｡逅・ｼ峨５ailwind CSS縲￣laywright縲ゝerser縲ゅョ繝励Ο繧､蜈医・ Vercel・・vercel.json` 縺ｫ繧ｭ繝｣繝・す繝･繝倥ャ繝險ｭ螳夲ｼ峨・- **髱咏噪繝ｩ繝ｳ繝・ぅ繝ｳ繧ｰ**・夂ｴ皮ｲ九↑ HTML + Tailwind・・LI 繝薙Ν繝会ｼ・ 繝舌ル繝ｩ JS・・assets/main.js`・峨ゅΔ繝ｼ繧ｷ繝ｧ繝ｳ縺ｯ IntersectionObserver縲√Δ繝舌う繝ｫ繝｡繝九Η繝ｼ縺ｪ縺ｩ DOM API 縺ｧ蛻ｶ蠕｡縲・- **React 繧｢繝励Μ**・啖ite 5縲ヽeact 18縲ゝypeScript 5縲ヽeact Router縲ゝanStack Query縲《hadcn UI・・adix Primitives・峨・mbla Carousel縲ヽecharts縲ヽeact Hook Form縲〇od縲～tailwindcss-animate`縲～tailwind-merge`縲・- **繝・・繧ｿ騾｣謳ｺ**・售upabase・・@supabase/supabase-js`・峨〒蠕・ｩ溘Μ繧ｹ繝育匳骭ｲ繧・ｨｺ譁ｭ邨先棡菫晏ｭ倥ｒ螳溯｣・・dge Function・・eno・峨〒 Lovable AI Gateway・・emini 2.5 Flash・峨↓謗･邯壹・- **CI/CD**・壼ｰら畑繝代う繝励Λ繧､繝ｳ縺ｯ譛ｪ螳夂ｾｩ縺縺後〃ercel 繝励Ο繧ｸ繧ｧ繧ｯ繝茨ｼ・.vercel` 繝・ぅ繝ｬ繧ｯ繝医Μ・峨→ Lovable・郁・蜍輔さ繝溘ャ繝磯｣謳ｺ・峨ｒ蜑肴署縺ｫ驕狗畑縲・
## 5. Codex蟆ら畑繧ｫ繧ｹ繧ｿ繝謖・､ｺ (Agent Persona / Instructions)
- 縺吶∋縺ｦ縺ｮ蝗樒ｭ斐・繧ｳ繝溘ャ繝医Γ繝・そ繝ｼ繧ｸ繝ｻ繧ｳ繝｡繝ｳ繝医・譌･譛ｬ隱槭〒險倩ｿｰ縺吶ｋ縲ょ､夜Κ API 繧・さ繝ｼ繝牙・譁・ｭ怜・縺瑚恭隱槭・蝣ｴ蜷医・縺昴・縺ｾ縺ｾ菫晄戟縲・- 譁ｰ隕丞ｮ溯｣・・菫ｮ豁｣縺ｯ蠢・★ TypeScript/TSX 縺ｮ繧ｽ繝ｼ繧ｹ繧呈峩譁ｰ縺励√ン繝ｫ繝画・譫懃黄縺ｸ縺ｯ逶ｴ謗･謇九ｒ蜉縺医↑縺・ょｿ・ｦ√↑繧峨ン繝ｫ繝峨さ繝槭Φ繝峨ｒ螳溯｡後＠縺ｦ謌先棡迚ｩ繧貞・逕滓・縺吶ｋ縲・- Tailwind 繧ｯ繝ｩ繧ｹ縺ｮ霑ｽ蜉縺ｯ譌｢蟄倥・繝・じ繧､繝ｳ繝医・繧ｯ繝ｳ縺ｨ髫主ｱ､縺ｫ蜷医ｏ縺帙ｋ縲よэ蜻ｳ縺ｮ驥崎､・ｒ驕ｿ縺代～bg-gradient-primary` 縺ｪ縺ｩ譌｢蟄倥Θ繝ｼ繝・ぅ繝ｪ繝・ぅ繧貞・蛻ｩ逕ｨ縲・- Supabase 繧呈桶縺・ｴ蜷医・ `getSupabaseClient()`・・au-luxe-landing/src/lib/supabase.ts` 縺ｪ縺ｩ・峨ｒ豬∫畑縺励√く繝ｼ荳崎ｶｳ譎ゅ・繝輔か繝ｼ繝ｫ繝舌ャ繧ｯ謖吝虚・医Ο繝ｼ繧ｫ繝ｫ謌仙粥謇ｱ縺・ｼ峨ｒ邯ｭ謖√☆繧九・- 繧ｨ繝ｩ繝ｼ繝上Φ繝峨Μ繝ｳ繧ｰ縺ｨ繝医・繧ｹ繝磯夂衍縺ｯ譌｢蟄・UX 縺ｫ蛟｣縺・Ａtoast.error`/`toast.success` 繧剃ｽｿ縺・∝､ｱ謨玲凾縺ｯ繝ｭ繧ｰ繧ょ・蜉帙・- 隍・尅縺ｪ繝ｭ繧ｸ繝・け繧定ｿｽ蜉縺吶ｋ蝣ｴ蜷医・縺ｿ邁｡貎斐↑繧ｳ繝｡繝ｳ繝医ｒ豺ｻ縺医ｋ縲ゆｸ崎ｦ√↑繧ｳ繝｡繝ｳ繝医ｄ繝ｭ繧ｱ繝ｼ繝ｫ縺ｨ辟｡髢｢菫ゅ↑繝繝溘・繝・く繧ｹ繝医・驕ｿ縺代ｋ縲・- 荳肴・轤ｹ繧・ｻ墓ｧ倅ｸ崎ｶｳ縺ｯ莉ｮ螳溯｣・〒蝪槭℃縺､縺､縲～TODO:` 繧ｳ繝｡繝ｳ繝医ｄ隱ｬ譏取枚繧呈律譛ｬ隱槭〒谿九＠縺ｦ繝ｦ繝ｼ繧ｶ繝ｼ縺ｫ遒ｺ隱阪ｒ菫・☆縲・- 菴懈･ｭ蠕後・髢｢騾｣繧ｳ繝槭Φ繝会ｼ医ン繝ｫ繝峨・Lint繝ｻPlaywright 縺ｪ縺ｩ・峨ｒ蜿ｯ閭ｽ縺ｪ遽・峇縺ｧ螳溯｡後＠縲∵悴螳溯｡後・蝣ｴ蜷医・逅・罰縺ｨ謗ｨ螂ｨ繧ｳ繝槭Φ繝峨ｒ蝣ｱ蜻翫☆繧九・


